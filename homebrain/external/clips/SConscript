##
# clips build script
##

Import('env')

clips_env = env.Clone()

target_os = clips_env.get('TARGET_OS')

clips_env.AppendUnique(CPPPATH = [
        'core',
        ])

clips_env.AppendUnique(CDEFINES = ['ALLOW_ENVIRONMENT_GLOBALS=0'])

clips_env.AppendUnique(CFLAGS = [
    # '-Wundef',
    # '-Wpointer-arith',
    # '-Wshadow',
    # '-Wcast-qual',
    # '-Winline',
    # '-Wmissing-declarations',
    # '-Wredundant-decls',
    # '-Wmissing-prototypes',
    # '-Wnested-externs',
    # '-Wstrict-prototypes',
    # '-Waggregate-return',
    # '-Wno-implicit',
    '-Wno-error=unused-result',
    '-Wno-error=maybe-uninitialized',
    '-Wno-error=unused-parameter',
    '-Wno-error=missing-field-initializers',
    '-Wno-error=unused-but-set-variable'
])

clips_env.AppendUnique(RPATH = [clips_env.get('BUILD_DIR')])

clips_core_src = [
    'core/agenda.c',
    'core/analysis.c',
    'core/argacces.c',
    'core/bload.c',
    'core/bmathfun.c',
    'core/bsave.c',
    'core/classcom.c',
    'core/classexm.c',
    'core/classfun.c',
    'core/classinf.c',
    'core/classini.c',
    'core/classpsr.c',
    'core/clsltpsr.c',
    'core/commline.c',
    'core/conscomp.c',
    'core/constrct.c',
    'core/constrnt.c',
    'core/crstrtgy.c',
    'core/cstrcbin.c',
    'core/cstrccom.c',
    'core/cstrcpsr.c',
    'core/cstrnbin.c',
    'core/cstrnchk.c',
    'core/cstrncmp.c',
    'core/cstrnops.c',
    'core/cstrnpsr.c',
    'core/cstrnutl.c',
    'core/default.c',
    'core/defins.c',
    'core/developr.c',
    'core/dffctbin.c',
    'core/dffctbsc.c',
    'core/dffctcmp.c',
    'core/dffctdef.c',
    'core/dffctpsr.c',
    'core/dffnxbin.c',
    'core/dffnxcmp.c',
    'core/dffnxexe.c',
    'core/dffnxfun.c',
    'core/dffnxpsr.c',
    'core/dfinsbin.c',
    'core/dfinscmp.c',
    'core/drive.c',
    'core/emathfun.c',
    'core/engine.c',
    'core/envrnmnt.c',
    'core/evaluatn.c',
    'core/expressn.c',
    'core/exprnbin.c',
    'core/exprnops.c',
    'core/exprnpsr.c',
    'core/extnfunc.c',
    'core/factbin.c',
    'core/factbld.c',
    'core/factcmp.c',
    'core/factcom.c',
    'core/factfun.c',
    'core/factgen.c',
    'core/facthsh.c',
    'core/factlhs.c',
    'core/factmch.c',
    'core/factmngr.c',
    'core/factprt.c',
    'core/factqpsr.c',
    'core/factqury.c',
    'core/factrete.c',
    'core/factrhs.c',
    'core/filecom.c',
    'core/filertr.c',
    'core/generate.c',
    'core/genrcbin.c',
    'core/genrccmp.c',
    'core/genrccom.c',
    'core/genrcexe.c',
    'core/genrcfun.c',
    'core/genrcpsr.c',
    'core/globlbin.c',
    'core/globlbsc.c',
    'core/globlcmp.c',
    'core/globlcom.c',
    'core/globldef.c',
    'core/globlpsr.c',
    'core/immthpsr.c',
    'core/incrrset.c',
    'core/inherpsr.c',
    'core/inscom.c',
    'core/insfile.c',
    'core/insfun.c',
    'core/insmngr.c',
    'core/insmoddp.c',
    'core/insmult.c',
    'core/inspsr.c',
    'core/insquery.c',
    'core/insqypsr.c',
    'core/iofun.c',
    'core/lgcldpnd.c',
    'core/memalloc.c',
    'core/miscfun.c',
    'core/modulbin.c',
    'core/modulbsc.c',
    'core/modulcmp.c',
    'core/moduldef.c',
    'core/modulpsr.c',
    'core/modulutl.c',
    'core/msgcom.c',
    'core/msgfun.c',
    'core/msgpass.c',
    'core/msgpsr.c',
    'core/multifld.c',
    'core/multifun.c',
    'core/objbin.c',
    'core/objcmp.c',
    'core/objrtbin.c',
    'core/objrtbld.c',
    'core/objrtcmp.c',
    'core/objrtfnx.c',
    'core/objrtgen.c',
    'core/objrtmch.c',
    'core/parsefun.c',
    'core/pattern.c',
    'core/pprint.c',
    'core/prccode.c',
    'core/prcdrfun.c',
    'core/prcdrpsr.c',
    'core/prdctfun.c',
    'core/prntutil.c',
    'core/proflfun.c',
    'core/reorder.c',
    'core/reteutil.c',
    'core/retract.c',
    'core/router.c',
    'core/rulebin.c',
    'core/rulebld.c',
    'core/rulebsc.c',
    'core/rulecmp.c',
    'core/rulecom.c',
    'core/rulecstr.c',
    'core/ruledef.c',
    'core/ruledlt.c',
    'core/rulelhs.c',
    'core/rulepsr.c',
    'core/scanner.c',
    'core/sortfun.c',
    'core/strngfun.c',
    'core/strngrtr.c',
    'core/symblbin.c',
    'core/symblcmp.c',
    'core/symbol.c',
    'core/sysdep.c',
    'core/textpro.c',
    'core/tmpltbin.c',
    'core/tmpltbsc.c',
    'core/tmpltcmp.c',
    'core/tmpltdef.c',
    'core/tmpltfun.c',
    'core/tmpltlhs.c',
    'core/tmpltpsr.c',
    'core/tmpltrhs.c',
    'core/tmpltutl.c',
    'core/userdata.c',
    'core/userfunctions.c',
    'core/utility.c',
    'core/watch.c',
]

static_libclips = clips_env.StaticLibrary('clips', clips_core_src)
clips_env.InstallTarget(static_libclips  , 'clips')
